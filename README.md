# Введение
Настольная игра [«Колонизаторы»][wiki] рассчитана на 3 или 4 игроков.   
Игроки представляют собой колонистов, высадившихся на необитаемый остров. На острове
имеется 5 видов ресурсов: зерно, глина, руда, шерсть, древесина. Ресурсы дают возможность
производить необходимые для колонизации постройки: «Дорога», «Поселение» и «Город». Целью
каждого игрока является набор Победных очков. Очки даются за строительство поселений и городов. 
![][catan cover]

# Используемое ПО
- ОС: Ubuntu
- Компилятор: g++
- UML: [StarUML](http://staruml.io/)
- библиотеки: [fmtlib](https://github.com/fmtlib/fmt), [spdlog](https://github.com/gabime/spdlog), вшиты в сборку

# Правила игры
### Подготовка
- Каждый игрок выбирает имя и получает 5 поселений, 4 города и 15 дорог. Каждый игрок
ставит на игровое поле по 1 поселению и по 1 дороге в прямом порядке игроков, затем -
еще по 1 поселению и 1 дороге в обратном порядке. Лишние поселения, дороги и города игрок
кладёт перед собой.
- Карты сырья разбираются на 5 колод сырьевого резерва и кладутся открыто рядом с игровым
полем.
- Наконец, каждый игрок получает по 1 карте сырья с каждого гекса, на котором стоит поселение, 
поставленное игроком при обратной расстановке поселений и дорог.
- Свои карты сырья каждый игрок держит в руке закрытыми (не показывает соперникам).
### Ход игры
1. Поступление сырья
- Игрок начинает свой ход, бросая два кубика: сумма очков, выпавших на кубиках, равна
номеру гексов, приносящих доход, если эта сумма не равна 7.
- Каждый игрок, имеющий поселение на перекрёстке, смежном с гексом под в ыпавшим
номером, берёт за него одну карту сырья этого гекса. Каждый игрок, имеюши йгород на
перекрестке, смежном с гексом под выпавшим номером, берет за него дв е карты сырья этого
гекса. Если он имеет несколько поселений или городов вокруг выпавшего поля, он получает
карты сырья с каждого поселения или города.   
- Если очередной игрок выбрасывает "7", то ни один из игроков не получает сырья. 
Все игроки, имеющие более 7 карт сырья, выбирают половину всех своих карт сырья и
отдают их в банк ресурсов. Затем игрок должен переставить Разбойника на номерной жетон любого игрового гекса. 
Затем игрок отбирает у игрока, имеющего поселение или город на этом гексе , одну карту
сырья и забирает ее себе. 
2. Торговля  
В свой ход игрок может обмениваться картами сырья со всеми игроками. Он может сообщить,
какие виды сырья ему необходимы и что он готов за них предложить. Он может также
выслушивать предложения партнёров и делать контрпредложения. 
3. Строительство    
Для строительства игрок должен отдать определенные карты сырья в бан к ресурсов, за что
может взять из своего запаса несколько дорог, поселений или городов и пос тавить их на игровое поле.
- Дорога требует 1 глину + 1 древесину.
Новая дорога всегда должна примыкать к собственной дороге игрока либо к его поселению
или городу. На каждом пути можно построить только 1 дорогу.
- Поселение требует 1 глину + 1 древесину + 1 шерсть + 1 зерно.
Поселение можно строить на перекрёстке, если три соседних перекрёстка НЕ заняты
поселениями или городами (неважно, кому они принадлежат).
Поселение можно строить на перекрестке, который является незанятым конц ом одной из своих дорог.
Поселение можно строить на перекрестке, до которого есть непрерывный путь по своим
дорогам от одного из своих поселений или городов. Каждое поселение приносит 1 победное очко.
- Город требует 3 руды + 2 зерна.
Город можно построить только путём расширения поселения. 
Если очередной игрок преобразует одно из своих поселений в город, он кладет посе ление в
свой резерв и заменяет его городом.
За город владелец получает вдвое больше карт сырья за смежные гексы: по две карты сырья с
гекса, если с него поступает сырьё.
Каждый город приносит по 2 победных очка. При замене поселения на город очки за
поселение изымаются у игрока. 
![][engine logic]

## О координатной сетке
Для указания места для гексов и объектов инфраструктуры игроков предлагается использовать
следующую координатную сетку (см. рисунок). Имеется две оси, Ох и Oy, угол между осями равен
60∘. На оси на равном расстоянии друг от друга нанесены отметки - целочисленные координаты.      
Гексы помещаются так, что их координаты их центров являются целыми числами. Например, центр
гекса А помещен в точку (2, 1), потому что до гекса можно добраться, совершив из центра координат
два шага "направо" и один шаг вверх параллельно оси Оy.        
Перекрестки однозначно задаются парой из координаты и значения TOP или BOTTOM. Например,
(см. рисунок) перекресток c1 может быть задан парой из координаты (2, 1) и значения TOP, а
перекресток c2 может быть задан парой из координаты (2, 1) и значения BOTTOM.      
Пути однозначно задаются парой из координаты и значения UP, RIGHT или DOWN. Например, (см.
рисунок) путь p1 может быть задан парой из координаты (-2, 1) и значения UP, путь p2 может быть
задан парой из координаты (-2, 1) и значения RIGHT, а путь p3 может быть задан парой из
координаты (-2, 1) и значения DOWN. 
![][field picture]


[wiki]: https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BB%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%82%D0%BE%D1%80%D1%8B_(%D0%BD%D0%B0%D1%81%D1%82%D0%BE%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B8%D0%B3%D1%80%D0%B0)
[field picture]: https://user-images.githubusercontent.com/21970927/27924249-49b70070-6289-11e7-83ed-ecf28fc66aa8.png
[mvc]: https://user-images.githubusercontent.com/21970927/27924248-49b4e420-6289-11e7-9326-26a75ae43205.png
[catan cover]: https://user-images.githubusercontent.com/21970927/27924250-49b7809a-6289-11e7-8ca1-9b5ed11c9f8e.png
[engine logic]: https://user-images.githubusercontent.com/21970927/27924251-49b94448-6289-11e7-986c-3f8f60974d9e.png
